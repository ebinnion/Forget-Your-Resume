/*! jQuery SH Image Select v1.0, Copyright 2012 Alexy Vauch! */
(function(a){a.fn.shImageSelect=function(h){var b;b=a.extend(!0,{mode:"checkbox",maxSelected:0,axis:"y",imageLimit:{x:3,y:3},showText:!0,additionalClass:"",theme:"box",skin:"light",callbacks:{onSelect:"",onUnselect:"",onSelectedLimit:""}},h);return this.each(function(){if(!a(this).attr("multiple"))return alert('You need to add "multiple" attribute to element'),!0;a(this).data("sh-image-select",new p(a(this),b,function(b){a(this).shScrollbar(b)}))})};var p=function(h,b,p){var c,r,j,s,t,u,v,w,d=this;
    this.wrapper=a("<div></div>").addClass("sh-img-select-wrapper");this.container=a("<div></div>").addClass("sh-img-select-container");this.screenContainer=a("<div></div>").addClass("sh-img-select-screen-container");this.select=function(a){m.increment()&&(h.children('[class="'+a.attr("id")+'"]').attr("selected","selected").end().triggerHandler("change"),q(a,"select",b.callbacks.onSelect))};this.unselect=function(a){m.decrement();h.children('[class="'+a.attr("id")+'"]').removeAttr("selected").end().triggerHandler("change");
        q(a,"unselect",b.callbacks.onUnselect)};j=!1;s=function(){a(this).children("img").stop().fadeTo(300,0.6);b.showText&&a(this).children(".sh-img-select-textblock").stop().animate({bottom:"5px"},"fast")};t=function(){a(this).children("img").stop().fadeTo(300,1);b.showText&&a(this).children(".sh-img-select-textblock").stop().animate({bottom:"-100%"},"fast")};u=function(k){var d=a(this).children("img");x(d,a(this));k.preventDefault()};v=function(d){var b=a(this),c=b.children("img");j=!1;setTimeout(function(){j||
    x(c,b)},300);d.preventDefault()};w=function(){j=!0};var x=function(k,c){if("radio"===b.mode){var e=k.attr("id"),l=!1;h.children("[selected]").each(function(){var b=d.screenContainer.find('[id="'+a(this).attr("class")+'"]');if(e!=a(this).attr("class"))d.unselect(b);else return l=!0});l||d.select(k)}else c.children(".sh-img-select-selected-layer").is(":visible")?d.unselect(k):d.select(k)},q=function(b,c,e){b=b.parent().children(".sh-img-select-selected-layer");"select"==c?b.fadeTo("fast",f.selectedLayerOpacity):
        b.fadeOut("fast");e&&a.shHelper.callCallback(e,d.container)},m={count:0,increment:function(){if(this.isLimit())return a.shHelper.callCallback(b.callbacks.onSelectedLimit,d.container),!1;this.count++;return!0},decrement:function(){this.count--},isLimit:function(){return 0!==b.maxSelected&&this.count>=b.maxSelected?!0:!1}},f,g=b.theme;c="sh-img-select-theme-";var e=0.6;switch(g){default:c+=g;break;case "minimal":e=1,c+=g}f={cssClass:c,selectedLayerOpacity:e};c=b.skin;e="sh-img-select-";g="light";switch(c){case "dark":e+=
        c;g=c;break;default:e+=c,g=c}c=e;r=g;var y=[];d.container.append(d.screenContainer);d.wrapper.append(d.container);h.hide().after(d.wrapper);d.wrapper.addClass(f.cssClass).addClass(c).addClass(b.additionalClass);h.children().each(function(b){var c=a("<img>");b="sh-img-select-image-"+b;d.container.append(c);c.attr({src:a(this).data("image"),id:b,alt:""});a(this).addClass(b);a(this).is(":selected")&&(m.increment(),y.push(c))});d.container.imagesLoaded(function(c){var e=0,g=a("<div></div>").addClass("sh-img-select-screen"),
        l=g,n,j=0,m=b.imageLimit.x*b.imageLimit.y;c.each(function(){var c=a("<div></div>").addClass("sh-img-select-image-wrapper"),f=a("<div></div>").addClass("sh-img-select-textblock"),k=a("<div></div>").addClass("sh-img-select-selected-layer");e==b.imageLimit.x&&(c.css("clear","left"),e=0);if(!n||n.children().length==m)n=g.clone().appendTo(d.screenContainer),j+=1;f.text(h.children("."+a(this).attr("id")).text());c.append(a(this),f,k).appendTo(n);1==j&&(l=n);e+=1});c=c.parent();a.each(y,function(a,b){q(b,
        "select")});if("y"==b.axis)d.screenContainer.children().css("clear","both"),d.container.css({"min-width":l.width(),height:l.height()});else{var f=0;d.container.css({width:l.width(),"min-height":l.height()});d.screenContainer.children().each(function(){f+=a(this).width()});d.screenContainer.css("width",f)}"ontouchstart"in document.documentElement?c.bind("touchstart",v).bind("touchmove",w):c.bind("click",u).bind("mouseover",s).bind("mouseout",t);a.shHelper.callCallback(p,d.container,{axis:b.axis,skin:r,
        contentElement:".sh-img-select-screen-container"})})}})(jQuery);

/*! jQuery SH Scrollbar v1.0, Copyright 2012 Alexy Vauch! */
(function(b){b.fn.shScrollbar=function(k){var d;d=b.extend(!0,{axis:"y",contentElement:"",skin:"light",scrollLength:30},k);return this.each(function(){var e=b(this).find(d.contentElement);if(!e.length)return alert("Could'nt find content block."),!0;b(this).data("sh-scrollbar",new n(b(this),e,d))})};var n=function(k,d,e){this.wrapper=b("<div></div>").addClass("sh-scrollbar-wrapper");this.track=b("<div></div>").addClass("sh-scrollbar-track");this.slider=b("<div></div>").addClass("sh-scrollbar-slider");
    var c=this,l,g=0,h=0,j={x:0,y:0},f,m,p,q=!1,n=function(a){j.y=a.originalEvent.touches[0].pageY;j.x=a.originalEvent.touches[0].pageX;q=!0;a.preventDefault()},w=function(a){a={x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY};q&&(c.slider.addClass("sh-scrollbar-draggable"),r(-(a[e.axis]-j[e.axis]+h)))},x=function(){h=0===g?g:-g;c.slider.removeClass("sh-scrollbar-draggable");q=!1},y=function(a){j.y=a.pageY;j.x=a.pageX;b(this).addClass("sh-scrollbar-draggable");b(document).bind("mousemove",
        u).bind("mouseup",v).bind(p+".disableSelection",function(a){a.preventDefault()})},u=function(a){r({x:a.pageX,y:a.pageY}[e.axis]-j[e.axis]+h)},v=function(){h=g;b(document).unbind("mousemove",u).unbind("mouseup",v).unbind(p+".disableSelection");c.slider.removeClass("sh-scrollbar-draggable")},z=function(a,c){r(h-c*e.scrollLength);h=g;a.preventDefault()},r=function(a){var b;0>a?a=0:a>l&&(a=l);a!=g&&(b=-(d[f]()-k[f]())*((a-0)/l),d.css(m,b),c.slider.css(m,a),g=a)},s;switch(e.skin){default:s="sh-scrollbar-light";
        break;case "dark":s="sh-scrollbar-dark"}var t;p=b.support.selectstart?"selectstart":"mousedown";d.css("position","relative");c.track.append(c.slider).appendTo(c.wrapper);c.wrapper.appendTo(k);"y"===e.axis?(t="sh-scrollbar-track-y",f="height",m="top"):(t="sh-scrollbar-track-x",f="width",m="left");c.wrapper.addClass(s).addClass(t);d[f]()<=k[f]()?c.wrapper.remove():(l=c.track[f]()-c.slider[f](),"ontouchstart"in document.documentElement?d.bind("touchstart",n).bind("touchmove",w).bind("touchend",x):(d.mousewheel(z),
        c.slider.bind("mousedown",y)))}})(jQuery);

/*! SH helper functions */
(function(d){d.extend({shHelper:{callCallback:function(a,b,c){"function"===typeof a&&a.call(b,c)}},addToObject:function(a,b){d.each(b,function(c,b){!1===c in a&&(a[c]=b)});return a},objectSize:function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b},getPercentagePart:function(a,b){var c=parseInt(b.replace("%",""));return a/100*c}})})(jQuery);

/**
 * "jQuery Mouse Wheel" - specifies the use of the mouse wheel..
 * @see https://github.com/brandonaaron/jquery-mousewheel for more info.
 */
(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0;a=d.event.fix(b);a.type="mousewheel";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);void 0!==b.wheelDeltaY&&(g=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.dispatch||d.event.handle).apply(this,c)}var c=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks)for(var h=c.length;h;)d.event.fixHooks[c[--h]]=
    d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,!1);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);

/**
 * "imagesLoaded" - cached images loader.
 * @see http://desandro.github.com/imagesloaded/ for more info.
 */
(function(c,n){var l="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.fn.imagesLoaded=function(f){function m(){var b=c(i),a=c(h);d&&(h.length?d.reject(e,b,a):d.resolve(e));c.isFunction(f)&&f.call(g,e,b,a)}function j(b,a){b.src===l||-1!==c.inArray(b,k)||(k.push(b),a?h.push(b):i.push(b),c.data(b,"imagesLoaded",{isBroken:a,src:b.src}),o&&d.notifyWith(c(b),[a,e,c(i),c(h)]),e.length===k.length&&(setTimeout(m),e.unbind(".imagesLoaded")))}var g=this,d=c.isFunction(c.Deferred)?c.Deferred():
    0,o=c.isFunction(d.notify),e=g.find("img").add(g.filter("img")),k=[],i=[],h=[];c.isPlainObject(f)&&c.each(f,function(b,a){if("callback"===b)f=a;else if(d)d[b](a)});e.length?e.bind("load.imagesLoaded error.imagesLoaded",function(b){j(b.target,"error"===b.type)}).each(function(b,a){var d=a.src,e=c.data(a,"imagesLoaded");if(e&&e.src===d)j(a,e.isBroken);else if(a.complete&&a.naturalWidth!==n)j(a,0===a.naturalWidth||0===a.naturalHeight);else if(a.readyState||a.complete)a.src=l,a.src=d}):m();return d?d.promise(g):
    g}})(jQuery);